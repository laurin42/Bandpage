<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Calistoga&family=Jersey+10+Charted&family=Jersey+25&family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
      rel="stylesheet"
      media="all"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Burnheart Mockery</title>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <div class="nav-items">
            <div class="nav-item-row">
              <li><a href="#music">Music</a></li>
            </div>
            <a
              href="#home"
              id="logo-image"
              onclick="rotateElement()"
              class="logo-container"
            >
              <img src="./public/logo.png" alt="Band Logo" class="logo" />
            </a>
            <div class="nav-item-row">
              <li><a href="#concerts">Gigs</a></li>
            </div>
          </div>
        </ul>
      </nav>
    </header>
    <main>
      <section id="home"></section>
      <div class="headline">
        <h1>
          <span class="header1">We are</span>
          <span class="header2">Burnheart Mockery</span>
        </h1>
      </div>
      <section id="gallery">
        <div class="bandfoto-container">
          <div class="bandfoto">
            <img
              src="./public/bandfoto1.jpg"
              alt="Quatsch mit Soße"
              class="foto"
            />
          </div>
        </div>
      </section>
      <section id="music">
        <audio id="myAudio" ontimeupdate="onTimeUpdate()">
          <!-- <source src="audio.ogg" type="audio/ogg"> -->
          <source id="source-audio" src="" type="audio/mpeg" />
          Your browser does not support the audio element.
        </audio>
        <div class="player-ctn">
          <div class="infos-ctn">
            <div class="timer">00:00</div>
            <div class="title"></div>
            <div class="duration">00:00</div>
          </div>
          <div id="myProgress">
            <div id="myBar"></div>
          </div>
          <div class="btn-ctn">
            <div class="btn-action first-btn" onclick="previous()">
              <div id="btn-faws-back">
                <i class="fas fa-step-backward"></i>
              </div>
            </div>
            <div class="btn-action" onclick="rewind()">
              <div id="btn-faws-rewind">
                <i class="fas fa-backward"></i>
              </div>
            </div>
            <div class="btn-action" onclick="toggleAudio()">
              <div id="btn-faws-play-pause">
                <i class="fas fa-play" id="icon-play"></i>
                <i
                  class="fas fa-pause"
                  id="icon-pause"
                  style="display: none"
                ></i>
              </div>
            </div>
            <div class="btn-play" onclick="forward()">
              <div id="btn-faws-forward">
                <i class="fas fa-forward"></i>
              </div>
            </div>
            <div class="btn-action" onclick="next()">
              <div id="btn-faws-next">
                <i class="fas fa-step-forward"></i>
              </div>
            </div>
            <div class="btn-mute" id="toggleMute" onclick="toggleMute()">
              <div id="btn-faws-volume">
                <i id="icon-vol-up" class="fas fa-volume-up"></i>
                <i
                  id="icon-vol-mute"
                  class="fas fa-volume-mute"
                  style="display: none"
                ></i>
              </div>
            </div>
          </div>
          <div class="playlist-ctn"></div>
        </div>
      </section>
      <section id="bio">
        <p>
          In den vernebelten Höhlen einer vergessenen Hippie-Kommune formte sich
          das Schicksal von Burnheart Mockery. Axl, der Gorilla unter den
          Sängern und spiritueller Bandleader, fand hier seine musikalischen
          Brüder: Luca, der kreative Geist, taucht in den Wirbelwind der
          Sologitarre ein, während Max, das Uhrwerk der Melodie, mit seinen
          Rhythmusgitarrenklängen die Seelen berührt. Lenny, Meister der
          Schießbude und Taktgeber, lenkt die Truppe durch sternenübersäten
          Nächte, während Laurin - für die tiefen Frequenzen zuständig -
          kosmische Basslines durch die Galaxien schickt.
        </p>
        <p>
          Die Reise von Burnheart Mockery geht durch die Wirren der Zeit und die
          Dunkelheit der Nacht. Während sie sich ihren Weg durch die Galaxien
          der Musik bahnen, bleiben sie vereint im Geist der Freiheit und der
          Liebe zur kosmischen Melodie, die sie zusammenbringt und ihre Seele in
          ewigem Glanz erstrahlen lässt...
        </p>
      </section>
      <section id="concerts" class="concerts">
        <h3>...Buckle Up and Join Us on Our Rock 'n' Roll Journey...</h3>
        <div class="button-container">
          <a href="https://wonderl.ink/@burnheart-mockery" class="follow-button"
            >FOLLOW US!</a
          >
        </div>
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Location</th>
              <th>Event</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>10.08.2024</td>
              <td>Leichlingen, Germany</td>
              <td>Ingo's Zeltplatz</td>
            </tr>
            <tr>
              <td>24.12.2024</td>
              <td>Narvik, Norway</td>
              <td>Weihnachtsfeier am Polarkreis</td>
            </tr>
            <tr>
              <td>01.01.2025</td>
              <td>Washington D.C., USA</td>
              <td>Neuhjahrsfeier des Präsidenten</td>
            </tr>
            <tr>
              <td>30.08.2025</td>
              <td>Wacken, Deutschland</td>
              <td>Wacken Open Air</td>
            </tr>
            <tr>
              <td>11.09.2025</td>
              <td>New York, USA</td>
              <td>Ground Zero Memorial Festival</td>
            </tr>
            <tr>
              <td>15.11.2025</td>
              <td>Wanne-Eickel, Germany</td>
              <td>Ich geh mit meiner Laterne</td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
    <footer>
      <div class="footer-content">
        <p>2024 Burnheart Mockery. Alle Rechte vorbehalten.</p>
        <dialog>
          <button autofocus>Close</button>
          <p>
            Impressum: Laurin Schmidt Benzstraße 9-11 51381 Leverkusen E-Mail:
            burnheart.mockery@gmail.com
          </p>
        </dialog>
        <button>Impressum</button>
      </div>
    </footer>
    <script type="module" src="main.js"></script>
    <script src="util.js"></script>
    <script
      src="https://kit.fontawesome.com/a062562745.js"
      crossorigin="anonymous"
    ></script>
    <script>
      function createTrackItem(index, name, duration) {
        var trackItem = document.createElement("div");
        trackItem.setAttribute("class", "playlist-track-ctn");
        trackItem.setAttribute("id", "ptc-" + index);
        trackItem.setAttribute("data-index", index);
        document.querySelector(".playlist-ctn").appendChild(trackItem);

        var playBtnItem = document.createElement("div");
        playBtnItem.setAttribute("class", "playlist-btn-play");
        playBtnItem.setAttribute("id", "pbp-" + index);
        document.querySelector("#ptc-" + index).appendChild(playBtnItem);

        var btnImg = document.createElement("i");
        btnImg.setAttribute("class", "fas fa-play");
        btnImg.setAttribute("height", "40");
        btnImg.setAttribute("width", "40");
        btnImg.setAttribute("id", "p-img-" + index);
        document.querySelector("#pbp-" + index).appendChild(btnImg);

        var trackInfoItem = document.createElement("div");
        trackInfoItem.setAttribute("class", "playlist-info-track");
        trackInfoItem.innerHTML = name;
        document.querySelector("#ptc-" + index).appendChild(trackInfoItem);

        var trackDurationItem = document.createElement("div");
        trackDurationItem.setAttribute("class", "playlist-duration");
        trackDurationItem.innerHTML = duration;
        document.querySelector("#ptc-" + index).appendChild(trackDurationItem);
      }

      var listAudio = [
        {
          name: "Burnheart Mockery - Still Rock",
          file: "./public/Still Rock.mp3",
          duration: "03:32",
        },
        {
          name: "Burnheart Mockery - Witches",
          file: "./public/Witches.mp3",
          duration: "06:41",
        },
      ];

      for (var i = 0; i < listAudio.length; i++) {
        createTrackItem(i, listAudio[i].name, listAudio[i].duration);
      }
      var indexAudio = 0;

      function loadNewTrack(index) {
        var player = document.querySelector("#source-audio");
        player.src = listAudio[index].file;
        document.querySelector(".title").innerHTML = listAudio[index].name;
        this.currentAudio = document.getElementById("myAudio");
        this.currentAudio.load();
        this.toggleAudio();
        this.updateStylePlaylist(this.indexAudio, index);
        this.indexAudio = index;
      }

      var playListItems = document.querySelectorAll(".playlist-track-ctn");

      for (let i = 0; i < playListItems.length; i++) {
        playListItems[i].addEventListener(
          "click",
          getClickedElement.bind(this)
        );
      }

      function getClickedElement(event) {
        for (let i = 0; i < playListItems.length; i++) {
          if (playListItems[i] == event.target) {
            var clickedIndex = event.target.getAttribute("data-index");
            if (clickedIndex == this.indexAudio) {
              // alert('Same audio');
              this.toggleAudio();
            } else {
              loadNewTrack(clickedIndex);
            }
          }
        }
      }

      document.querySelector("#source-audio").src = listAudio[indexAudio].file;
      document.querySelector(".title").innerHTML = listAudio[indexAudio].name;

      var currentAudio = document.getElementById("myAudio");

      currentAudio.load();

      currentAudio.onloadedmetadata = function () {
        document.getElementsByClassName("duration")[0].innerHTML =
          this.getMinutes(this.currentAudio.duration);
      }.bind(this);

      var interval1;

      function toggleAudio() {
        if (this.currentAudio.paused) {
          document.querySelector("#icon-play").style.display = "none";
          document.querySelector("#icon-pause").style.display = "block";
          document
            .querySelector("#ptc-" + this.indexAudio)
            .classList.add("active-track");
          this.playToPause(this.indexAudio);
          this.currentAudio.play();
        } else {
          document.querySelector("#icon-play").style.display = "block";
          document.querySelector("#icon-pause").style.display = "none";
          this.pauseToPlay(this.indexAudio);
          this.currentAudio.pause();
        }
      }

      function pauseAudio() {
        this.currentAudio.pause();
        clearInterval(interval1);
      }

      var timer = document.getElementsByClassName("timer")[0];

      var barProgress = document.getElementById("myBar");

      var width = 0;

      function onTimeUpdate() {
        var t = this.currentAudio.currentTime;
        timer.innerHTML = this.getMinutes(t);
        this.setBarProgress();
        if (this.currentAudio.ended) {
          document.querySelector("#icon-play").style.display = "block";
          document.querySelector("#icon-pause").style.display = "none";
          this.pauseToPlay(this.indexAudio);
          if (this.indexAudio < listAudio.length - 1) {
            var index = parseInt(this.indexAudio) + 1;
            this.loadNewTrack(index);
          }
        }
      }

      function setBarProgress() {
        var progress =
          (this.currentAudio.currentTime / this.currentAudio.duration) * 100;
        document.getElementById("myBar").style.width = progress + "%";
      }

      function getMinutes(t) {
        var min = parseInt(parseInt(t) / 60);
        var sec = parseInt(t % 60);
        if (sec < 10) {
          sec = "0" + sec;
        }
        if (min < 10) {
          min = "0" + min;
        }
        return min + ":" + sec;
      }

      var progressbar = document.querySelector("#myProgress");
      progressbar.addEventListener("click", seek.bind(this));

      function seek(event) {
        var percent = event.offsetX / progressbar.offsetWidth;
        this.currentAudio.currentTime = percent * this.currentAudio.duration;
        barProgress.style.width = percent * 100 + "%";
      }

      function forward() {
        this.currentAudio.currentTime = this.currentAudio.currentTime + 5;
        this.setBarProgress();
      }

      function rewind() {
        this.currentAudio.currentTime = this.currentAudio.currentTime - 5;
        this.setBarProgress();
      }

      function next() {
        if (this.indexAudio < listAudio.length - 1) {
          var oldIndex = this.indexAudio;
          this.indexAudio++;
          updateStylePlaylist(oldIndex, this.indexAudio);
          this.loadNewTrack(this.indexAudio);
        }
      }

      function previous() {
        if (this.indexAudio > 0) {
          var oldIndex = this.indexAudio;
          this.indexAudio--;
          updateStylePlaylist(oldIndex, this.indexAudio);
          this.loadNewTrack(this.indexAudio);
        }
      }

      function updateStylePlaylist(oldIndex, newIndex) {
        document
          .querySelector("#ptc-" + oldIndex)
          .classList.remove("active-track");
        this.pauseToPlay(oldIndex);
        document
          .querySelector("#ptc-" + newIndex)
          .classList.add("active-track");
        this.playToPause(newIndex);
      }

      function playToPause(index) {
        var ele = document.querySelector("#p-img-" + index);
        ele.classList.remove("fa-play");
        ele.classList.add("fa-pause");
      }

      function pauseToPlay(index) {
        var ele = document.querySelector("#p-img-" + index);
        ele.classList.remove("fa-pause");
        ele.classList.add("fa-play");
      }

      function toggleMute() {
        var btnMute = document.querySelector("#toggleMute");
        var volUp = document.querySelector("#icon-vol-up");
        var volMute = document.querySelector("#icon-vol-mute");
        if (this.currentAudio.muted == false) {
          this.currentAudio.muted = true;
          volUp.style.display = "none";
          volMute.style.display = "block";
        } else {
          this.currentAudio.muted = false;
          volMute.style.display = "none";
          volUp.style.display = "block";
        }
      }
      function rotateElement() {
        const headerImage = document.getElementById("logo-image");

        headerImage.classList.add("rotate");
        setTimeout(() => {
          headerImage.classList.remove("rotate");
        }, 2000);
      }

      const dialog = document.querySelector("dialog");
      const showButton = document.querySelector("dialog + button");
      const closeButton = document.querySelector("dialog button");

      // "Show the dialog" button opens the dialog modally
      showButton.addEventListener("click", () => {
        dialog.showModal();
      });

      // "Close" button closes the dialog
      closeButton.addEventListener("click", () => {
        dialog.close();
      });
    </script>
  </body>
</html>
